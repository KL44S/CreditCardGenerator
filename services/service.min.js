!function(){var a=angular.module("myApp");a.factory("cardGeneratorService",["creditCardTypeModel","customPrefixModel",function(a,b){var c={};return c.generateCardNumberByLuhnAlgorithm=function(a,b){var c=0,d=[],e=0,f=0,g=0;for(i=0;i<a.length;i++)d.push(a.charAt(i));for(;d.length<b;)d.push(Math.floor(10*Math.random())%10);var j=(b+1)%2;for(c=0;c<b-1;c++)(c+j)%2?(g=2*parseInt(d[c]),g>9&&(g-=9),e+=g):e+=parseInt(d[c]);return f=(10-e%10)%10,d[b-1]=f.toString(),g=d.join(""),g=g.substr(0,b)},c.isValidTheCustomPrefix=function(a){var b=void 0!=a.customPrefix.value&&!isNaN(a.customPrefix.value.toString());return b=b&&a.customPrefix.value.length>a.customPrefix.minCustomPrefixLength,b=b&&a.customPrefix.value.length<=a.customPrefix.maxCustomPrefixLength},c.generateCardNumber=function(a){var b=a.cardTypeSelected.CardNumberPrefix,d="";c.isValidTheCustomPrefix(a)?d=a.customPrefix.value.toString():b.length>0&&(d=b[Math.floor(Math.random()*b.length)]);var e=a.cardTypeSelected.CardNumberLength;if(d.length<e)if(a.cardTypeSelected.ValidateWithLuhnAlgorithm)d=c.generateCardNumberByLuhnAlgorithm(d,e);else for(var f=e-d.length,g=0;g<f;g++)d+=Math.floor(9*Math.random()).toString();return d},c}])}();