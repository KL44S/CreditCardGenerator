!function(){var a=angular.module("myApp");a.factory("cardGeneratorService",["$http",function(a){var b={};return b.shouldCodeCardGenerateByLuhnAlgorithm=function(a){var b=[5,8,9,10],c=!1;return b.forEach(function(b){b==a&&(c=!0)}),c},b.generateCardNumberByLuhnAlgorithm=function(a,b){var c=0,d=[],e=0,f=0,g=0;for(i=0;i<a.length;i++)d.push(a.charAt(i));for(;d.length<b;)d.push(Math.floor(10*Math.random())%10);var k=(b+1)%2;for(c=0;c<b-1;c++)(c+k)%2?(g=2*parseInt(d[c]),g>9&&(g-=9),e+=g):e+=parseInt(d[c]);return f=(10-e%10)%10,d[b-1]=f.toString(),g=d.join(""),g=g.substr(0,b)},b.getCardLengths=function(){var a={};return a[1]=16,a[2]=14,a[3]=16,a[4]=16,a[5]=16,a[6]=16,a[7]=16,a[8]=16,a[9]=16,a[10]=16,a},b.getPrefixes=function(){var a={};return a[1]=["6019"],a[2]=["36"],a[3]=["604","589657","603522"],a[4]=[""],a[5]=["5"],a[6]=["5898","542991","549530","549564","549571","549576"],a[7]=["6018"],a[8]=["4"],a[9]=["524093","525473","525486"],a[10]=["450626","450637","455134","498479"],a},b.generateCardNumberByCode=function(a){var c=b.getPrefixes()[a.codeCardTypeSelected],d="";void 0==a.customPrefix||isNaN(a.customPrefix.toString())?c.length>0&&(d=c[Math.floor(Math.random()*c.length)]):d=a.customPrefix.toString();var e=b.getCardLengths()[a.codeCardTypeSelected];if(b.shouldCodeCardGenerateByLuhnAlgorithm(a.codeCardTypeSelected))d=b.generateCardNumberByLuhnAlgorithm(d,e);else for(var f=e-d.length,g=0;g<f;g++)d+=Math.floor(9*Math.random()).toString();return d},b.loadCardTypesByCode=function(){var a=[{CodeCardType:1,CardTypeDescription:"CREDITEL"},{CodeCardType:2,CardTypeDescription:"DINERS"},{CodeCardType:3,CardTypeDescription:"CABAL"},{CodeCardType:5,CardTypeDescription:"ARGENCARD-MASTERCARD"},{CodeCardType:6,CardTypeDescription:"OCA"},{CodeCardType:7,CardTypeDescription:"TARJETA D"},{CodeCardType:8,CardTypeDescription:"VISA INTERNACIONAL S.A."},{CodeCardType:9,CardTypeDescription:"MASTERCARD-SCOTIABANK"},{CodeCardType:10,CardTypeDescription:"VISA INTERNACIONAL-SCOTIABANK"}];return a},b}])}();